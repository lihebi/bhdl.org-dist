{"componentChunkName":"component---src-templates-docs-js","path":"/docs/admin/","result":{"data":{"markdownRemark":{"html":"<h1 id=\"bhdl-administrator-setup-guide\" style=\"position:relative;\"><a href=\"#bhdl-administrator-setup-guide\" aria-label=\"bhdl administrator setup guide permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>BHDL Administrator Setup Guide</h1>\n<h2 id=\"install-for-development\" style=\"position:relative;\"><a href=\"#install-for-development\" aria-label=\"install for development permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Install for development</h2>\n<p>For development purpose, you might want to clone the repo and install the cloned\nlocal package. This is known as \"linking\":</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git clone https://\ncd bhdl-lib\nraco pkg install</code></pre></div>\n<p>This will place a link between the installed packages and this local\ndirectory. Everytime this local code is modified, the update is immediately\navailable for the package <code class=\"language-text\">bhdl</code>.</p>\n<h2 id=\"jupyter-hub-server\" style=\"position:relative;\"><a href=\"#jupyter-hub-server\" aria-label=\"jupyter hub server permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Jupyter Hub server</h2>\n<p>For demo purpose, it is desired to setup BHDL on a server, so that users can\njust login to the server and run BHDL directly without the hassle of\ninstallation. Also, the auto-placement engine requires GPU to run efficiently,\nwhich may not be available for users' own machines. This section describes the\ngeneral process to setup a jupyterhub server capable of running BHDL.</p>\n<h3 id=\"install-the-jupyterhub\" style=\"position:relative;\"><a href=\"#install-the-jupyterhub\" aria-label=\"install the jupyterhub permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Install the jupyterhub</h3>\n<p>This section mostly follows <a href=\"https://jupyterhub.readthedocs.io/en/latest/installation-guide-hard.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">the official jupyterhub\nguide</a>. It\nis simplied a little (removed the conda part) and noted here for quick reference.</p>\n<p>Create a virtual environment for jupyterhub:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo python3 -m venv /opt/jupyterhub/</code></pre></div>\n<p>Install some packages. Note that if you want install any future packages for\njupyterhub server, like an extension, you must use this executable and install\nit globally.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo /opt/jupyterhub/bin/python3 -m pip install wheel\nsudo /opt/jupyterhub/bin/python3 -m pip install jupyterhub jupyterlab\nsudo /opt/jupyterhub/bin/python3 -m pip install ipywidgets</code></pre></div>\n<p>Some nodejs dependencies:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo apt install nodejs npm\nsudo npm install -g configurable-http-proxy</code></pre></div>\n<p>Generate configuration:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo mkdir -p /opt/jupyterhub/etc/jupyterhub/\ncd /opt/jupyterhub/etc/jupyterhub/\nsudo /opt/jupyterhub/bin/jupyterhub --generate-config</code></pre></div>\n<p>change one config in <code class=\"language-text\">jupyterhub_config.py</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">c.Spawner.default_url = &#39;/lab&#39;</code></pre></div>\n<p>Add system service so that it can be started as a daemon and auto-start on boot:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo mkdir -p /opt/jupyterhub/etc/systemd\n/opt/jupyterhub/etc/systemd/jupyterhub.service\nsudo ln -s /opt/jupyterhub/etc/systemd/jupyterhub.service /etc/systemd/system/jupyterhub.service</code></pre></div>\n<p>the service file content:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[Unit]\nDescription=JupyterHub\nAfter=syslog.target network.target\n\n[Service]\nUser=root\nEnvironment=&quot;PATH=/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/opt/jupyterhub/bin&quot;\nExecStart=/opt/jupyterhub/bin/jupyterhub -f /opt/jupyterhub/etc/jupyterhub/jupyterhub_config.py\n\n[Install]\nWantedBy=multi-user.target</code></pre></div>\n<p>enable and start it:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo systemctl daemon-reload\nsudo systemctl enable jupyterhub.service\nsudo systemctl start jupyterhub.service\nsudo systemctl status jupyterhub.service</code></pre></div>\n<p>The default port is <code class=\"language-text\">8000</code>, and it seems also to use <code class=\"language-text\">8001</code>. Chaning 8000 in\nconfiguration does not change 8001, which in turns seems to make it unable to\nstart two instances of jupyterhub easily.</p>\n<h3 id=\"the-iracket-kernel\" style=\"position:relative;\"><a href=\"#the-iracket-kernel\" aria-label=\"the iracket kernel permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The iracket kernel</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo apt install libzmq5\ngit clone https://github.com/lihebi/iracket\ncd iracket &amp;&amp; git checkout dev\nraco pkg install\nraco iracket install</code></pre></div>\n<h3 id=\"install-bhdl-and-start-the-placement-engine\" style=\"position:relative;\"><a href=\"#install-bhdl-and-start-the-placement-engine\" aria-label=\"install bhdl and start the placement engine permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Install BHDL and start the placement engine</h3>\n<p>Install BHDL:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">raco pkg install git://github.com/lihebi/bhdl/?path=bhdl-lib</code></pre></div>\n<p>Start placement engine (and this will listen on port 8082 and shared for all\nusers):</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git clone https://github.com/lihebi/bhdl\ncd bhdl/placement\n# NOTE: Need install Julia dependencies via:\n# julia --project\n# Julia&gt; ]instantiate\njulia --project server.jl</code></pre></div>\n<h4 id=\"optional-clone-the-bhdl-libraries\" style=\"position:relative;\"><a href=\"#optional-clone-the-bhdl-libraries\" aria-label=\"optional clone the bhdl libraries permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(Optional) Clone the bhdl libraries:</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git clone --recursive https://github.com/lihebi/bhdl-footprints /opt/bhdl-footprints\nexport BHDL_LIBRARY_PATH=/opt/bhdl-footprints</code></pre></div>\n<p>Users probably should set up their own libraries in their home directory,\nbecause the easyeda library is written to disk if not available locally, thus users need write access to the library.</p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#bhdl-administrator-setup-guide\">BHDL Administrator Setup Guide</a></p>\n<ul>\n<li><a href=\"#install-for-development\">Install for development</a></li>\n<li>\n<p><a href=\"#jupyter-hub-server\">Jupyter Hub server</a></p>\n<ul>\n<li><a href=\"#install-the-jupyterhub\">Install the jupyterhub</a></li>\n<li><a href=\"#the-iracket-kernel\">The iracket kernel</a></li>\n<li>\n<p><a href=\"#install-bhdl-and-start-the-placement-engine\">Install BHDL and start the placement engine</a></p>\n<ul>\n<li><a href=\"#optional-clone-the-bhdl-libraries\">(Optional) Clone the bhdl libraries:</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":""}}},"pageContext":{"slug":"/docs/admin/"}},"staticQueryHashes":["3649515864"]}